<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Heathen Hord ‚Äî G√©n√©rateur de Prompt (v10.5 FR‚ÄëINT√âGRAL)</title>
  <style>
    :root{
      --bg:#0b1020; --panel:#121833; --ink:#e7e9ef; --muted:#9aa4bf;
      --accent:#3a68ff; --line:#263056; --ok:#42d392; --warn:#ffb454;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,"Apple Color Emoji","Segoe UI Emoji"; background:var(--bg); color:var(--ink);}
    header{padding:1.2rem 1.4rem; border-bottom:1px solid var(--line); display:flex; align-items:center; gap:.8rem}
    header h1{font-size:1.1rem; margin:0}
    main{display:grid; grid-template-columns: 1fr; gap:1rem; padding:1rem;}
    @media(min-width:1000px){ main{ grid-template-columns: 500px 1fr;} }
    .card{background:var(--panel); border:1px solid var(--line); border-radius:14px; padding:1rem; box-shadow:0 4px 20px rgba(0,0,0,.15)}
    .row{display:grid; grid-template-columns: 1fr 1fr; gap:.6rem}
    label{display:block; font-size:.86rem; color:var(--muted); margin:.35rem 0 .25rem}
    input[type="text"], select, textarea{
      width:100%; background:#0f1630; color:var(--ink); border:1px solid var(--line);
      border-radius:10px; padding:.65rem .7rem; font-size:.95rem;
    }
    textarea{height:180px; resize:vertical}
    .hint{font-size:.85rem; color:var(--muted)}
    .btns{display:flex; flex-wrap:wrap; gap:.5rem; margin-top:.8rem}
    button{
      background:var(--accent); color:white; border:0; border-radius:10px; padding:.65rem .9rem; cursor:pointer; font-weight:600;
    }
    button.ghost{background:transparent; color:var(--ink); border:1px solid var(--line)}
    button.ok{background:var(--ok); color:#08130d}
    button.warn{background:var(--warn); color:#231a00}
    .output textarea{width:100%; height:60vh; border:0; background:#0a122a; color:var(--ink); padding:1rem; font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-size:.95rem}
    .pill{display:inline-flex; align-items:center; gap:.4rem; border:1px solid var(--line); border-radius:999px; padding:.25rem .55rem; font-size:.8rem; color:var(--muted)}
    .footer{padding:1rem; text-align:center; color:var(--muted); font-size:.85rem}
    .small{font-size:.82rem}
  </style>
</head>
<body>
  <header>
    <div style="font-size:1.4rem">‚öîÔ∏è</div>
    <h1>Heathen Hord ‚Äî G√©n√©rateur de Prompt <span class="pill">v10.5 FR‚ÄëINT√âGRAL</span></h1>
  </header>

  <main>
    <section class="card">
      <div class="row">
        <div>
          <label for="type">TYPE</label>
          <select id="type">
            <option>TACTIQUE</option>
            <option>ANNONCE</option>
            <option>MOTIVATION</option>
            <option>DIPLOMATIE</option>
            <option>C√âL√âBRATION</option>
          </select>
        </div>
        <div>
          <label for="theme">TH√àME</label>
          <input id="theme" type="text" placeholder="Bataille d'Ar√®ne">
        </div>
      </div>

      <div class="row">
        <div>
          <label for="objectif">OBJECTIF</label>
          <select id="objectif">
            <option>RAPPELER</option>
            <option>MOTIVER</option>
            <option>INFORMER</option>
            <option>F√âLICITER</option>
            <option>ALERTER</option>
          </select>
        </div>
        <div>
          <label for="ton">TON</label>
          <select id="ton">
            <option>F√âD√âRATEUR</option>
            <option>√âNERGIQUE</option>
            <option>DIPLOMATIQUE</option>
            <option>FACTUEL</option>
          </select>
        </div>
      </div>

      <div class="row">
        <div>
          <label for="urgence">URGENCE</label>
          <select id="urgence">
            <option>OUI</option>
            <option>NON</option>
          </select>
        </div>
        <div>
          <label for="version">VERSION</label>
          <input id="version" type="text" value="v10">
        </div>
      </div>

      <div class="row">
        <div>
          <label for="auteur">AUTEUR</label>
          <input id="auteur" type="text" value="Vidou, R4 Heathen Hord">
        </div>
        <div>
          <label for="lang">LANGUE DE SORTIE (ISO)</label>
          <input id="lang" type="text" value="FR" placeholder="FR">
        </div>
      </div>

      <label for="details">D√âTAILS (une puce par ligne)</label>
      <textarea id="details">- Combattez le plus tard possible avant la r√©initialisation du serveur
- N'attaquez jamais un membre du m√™me serveur
- Restons unis pour grimper au classement ensemble
- Gardez un canal ouvert pour la coordination d'√©quipe</textarea>

      <div class="row">
        <div>
          <label for="format">FORMAT</label>
          <select id="format">
            <option>COMPLET</option>
            <option>COURT</option>
          </select>
        </div>
        <div>
          <label>&nbsp;</label>
          <div class="btns">
            <button class="ok" id="buildBtn">G√©n√©rer le YAML</button>
            <button class="ghost" id="resetBtn" type="button">R√©initialiser</button>
          </div>
        </div>
      </div>

      <p class="hint small">Astuce : vous pouvez coller votre ancien YAML dans les D√âTAILS pour garder une trace ; le CHANGELOG sera calcul√© c√¥t√© ChatGPT lorsque vous renverrez le nouveau bloc.</p>
    </section>

    <section class="card">
      <h3 style="margin-top:0">YAML g√©n√©r√©</h3>
      <div class="output">
        <textarea id="yamlOut" readonly placeholder="Cliquez sur ¬´ G√©n√©rer le YAML ¬ª..."></textarea>
      </div>
      <div class="btns">
        <button id="copyBtn">üìã Copier le YAML</button>
        <button id="downloadTxt" class="ghost">‚¨áÔ∏è T√©l√©charger .txt</button>
        <button id="downloadHtml" class="ghost">‚¨áÔ∏è T√©l√©charger cette page .html</button>
      </div>
      <p class="hint">Collez le YAML dans ChatGPT. Le prompt est auto‚Äëporteur et g√©n√®re le courrier long + message court + changelog.</p>
    </section>
  </main>

  <div class="footer">‚öîÔ∏è Heathen Hord ‚Äî G√©n√©rateur de Prompt. Copie fiable (Clipboard API + fallback). Utilisable hors‚Äëligne.</div>

  <script>
    const templateHeader = `# ‚öîÔ∏è HEATHEN HORD R4 ‚Äî PROMPT DE COMMUNICATION (v10, FR‚ÄëINT√âGRAL)
# Copiez ce bloc YAML, modifiez la section COMM, puis envoyez‚Äële directement √† ChatGPT.
# L'assistant m√©morise les versions pr√©c√©dentes dans cette discussion pour g√©n√©rer :
#   1Ô∏è‚É£ Un COURRIER LONG (message officiel avec r√©sum√© et historique de versions)
#   2Ô∏è‚É£ Un MESSAGE COURT (notification de chat)
# Il compare √©galement avec la version pr√©c√©dente (si elle existe) pour produire un CHANGELOG.

contexte:
  r√¥le: "Assistant officiel de communication de l'alliance Heathen Hord"
  jeu: "Last Z Survival Shooter"
  r√¥le_auteur: "Vidou, R4 de l'alliance"
  mission: >
    G√©n√©rer deux communications li√©es :
      1. Un courrier long (texte principal, r√©sum√© interne, historique de versions)
      2. Un message court annon√ßant le courrier.
    Assurer le suivi de version dans la m√™me discussion :
      - Comparer le nouveau COMM avec le pr√©c√©dent
      - D√©tecter les diff√©rences et produire un changelog (ajouts, suppressions, modifications)
      - Mettre √† jour l'historique de versions dans le courrier long.
    Toujours refl√©ter les valeurs Heathen Hord :
    coh√©sion, discipline, strat√©gie, respect, solidarit√©.
  langue_de_sortie:
    description: "Langue dans laquelle g√©n√©rer les messages"
    par_d√©faut: "FR"

r√®gles:
  format_titre: "[emoji] [TYPE] ‚Äî [TH√àME] [VERSION]"
  emoji:
    ANNONCE: "üéñÔ∏è"
    TACTIQUE: "‚öîÔ∏è"
    MOTIVATION: "üí¨"
    DIPLOMATIE: "üïäÔ∏è"
    C√âL√âBRATION: "üíé"
  urgence:
    OUI: "Ajouter üî• URGENT üî• et adopter un ton plus pressant"
    NON: "Aucun effet particulier"
  style:
    - "Texte clair et a√©r√©, lisible sur mobile"
    - "Respecter TON et OBJECTIF"
    - "La signature doit inclure AUTEUR"
    - "Ajouter l'historique seulement si VERSION > v1"
    - "Ajouter un changelog si une version pr√©c√©dente existe"
    - "Message court = 2‚Äì4 lignes invitant √† lire le courrier"
    - "Langue de sortie selon LANG (par d√©faut : FR)"

guides:
  type:
    ANNONCE: {emoji: "üéñÔ∏è", ton: ["FACTUEL", "F√âD√âRATEUR"], style: "formel, respectueux"}
    TACTIQUE: {emoji: "‚öîÔ∏è", ton: ["√âNERGIQUE", "F√âD√âRATEUR"], style: "orient√© action, motivant"}
    MOTIVATION: {emoji: "üí¨", ton: ["√âNERGIQUE", "F√âD√âRATEUR"], style: "positif, f√©d√©rateur"}
    DIPLOMATIE: {emoji: "üïäÔ∏è", ton: ["DIPLOMATIQUE", "FACTUEL"], style: "calme, poli"}
    C√âL√âBRATION: {emoji: "üíé", ton: ["√âNERGIQUE", "F√âD√âRATEUR"], style: "festif, reconnaissant"}

  ton:
    √âNERGIQUE: "Phrases courtes, verbes d'action, emojis dynamiques"
    F√âD√âRATEUR: "Langage collectif : nous, ensemble, solidarit√©"
    DIPLOMATIQUE: "Mod√©ration, formulations courtoises"
    FACTUEL: "Neutre, concis, informatif"

  guide_urgence:
    OUI: "Style plus dynamique, mention explicite de l'urgence"
    NON: "Style normal selon le TYPE"

# ==========================================================
# üß© MODIFIEZ CETTE SECTION AVANT ENVOI
# ==========================================================
COMM:
`;

    function buildYAML(){
      const get = id => document.getElementById(id).value;
      const ensureBullets = (txt)=>{
        return txt.split(/\r?\n/).map(l=>{
          l = l.trim();
          if(!l) return null;
          return l.startsWith('- ') ? l : '- ' + l;
        }).filter(Boolean).join('\n');
      };

      const COMM =
`  TYPE: "${get('type')}"
  TH√àME: "${get('theme') || "Bataille d'Ar√®ne"}"
  OBJECTIF: "${get('objectif')}"
  TON: "${get('ton')}"
  URGENCE: "${get('urgence')}"
  VERSION: "${get('version') || 'v10'}"
  AUTEUR: "${get('auteur') || 'Vidou, R4 Heathen Hord'}"
  LANG: "${get('lang') || 'FR'}"
  D√âTAILS: |
${ensureBullets(get('details')).split('\n').map(l=>'    '+l).join('\n')}
  FORMAT: "${get('format')}"`;

      return templateHeader + COMM + `

# ==========================================================
# üßæ SORTIES ATTENDUES
# ==========================================================
# 1Ô∏è‚É£ COURRIER LONG
#   - Titre complet avec emoji, TYPE, TH√àME, VERSION
#   - Corps conforme √† TON, OBJECTIF et LANG
#   - Signature avec AUTEUR
#   - üí¨ R√©sum√© interne
#   - üß© CHANGELOG (diff√©rences avec la version pr√©c√©dente)
#   - üß† Historique des versions
#
# 2Ô∏è‚É£ MESSAGE COURT (CHAT)
#   - Si URGENCE=OUI ‚Üí inclure üî• URGENT üî•
#   - Mentionner TH√àME et VERSION
#   - 2‚Äì4 lignes maximum
#   - Style et langue selon LANG et TYPE
#   - Inciter les membres √† lire le courrier
`;
    }

    const out = document.getElementById('yamlOut');

    document.getElementById('buildBtn').addEventListener('click', e=>{
      e.preventDefault();
      out.value = buildYAML();
      out.scrollTop = 0;
    });

    document.getElementById('resetBtn').addEventListener('click', e=>{
      e.preventDefault();
      document.getElementById('type').value = 'TACTIQUE';
      document.getElementById('theme').value = '';
      document.getElementById('objectif').value = 'RAPPELER';
      document.getElementById('ton').value = 'F√âD√âRATEUR';
      document.getElementById('urgence').value = 'OUI';
      document.getElementById('version').value = 'v10';
      document.getElementById('auteur').value = 'Vidou, R4 Heathen Hord';
      document.getElementById('lang').value = 'FR';
      document.getElementById('details').value = "- Combattez le plus tard possible avant la r√©initialisation du serveur\n- N'attaquez jamais un membre du m√™me serveur\n- Restons unis pour grimper au classement ensemble\n- Gardez un canal ouvert pour la coordination d'√©quipe";
      document.getElementById('format').value = 'COMPLET';
      out.value='';
    });

    async function copyYAML(){
      if(!out.value) out.value = buildYAML();
      try{
        await navigator.clipboard.writeText(out.value);
        alert('‚úÖ YAML copi√© dans le presse‚Äëpapiers !');
        return;
      }catch(e){}
      out.focus();
      out.select();
      out.setSelectionRange(0, out.value.length);
      try{
        const ok = document.execCommand('copy');
        alert(ok ? '‚úÖ YAML copi√© dans le presse‚Äëpapiers !' : '‚ùå √âchec de la copie ‚Äî copiez manuellement.');
      }catch(e){
        alert('‚ùå √âchec de la copie ‚Äî copiez manuellement.');
      }
    }
    document.getElementById('copyBtn').addEventListener('click', copyYAML);

    function download(name, content, type='text/plain'){
      const blob = new Blob([content], {type});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = name;
      document.body.appendChild(a);
      a.click();
      setTimeout(()=>{
        URL.revokeObjectURL(a.href);
        a.remove();
      }, 500);
    }
    document.getElementById('downloadTxt').addEventListener('click', ()=>{
      const y = out.value || buildYAML();
      download('heathen-hord-prompt-v10-fr-integral.txt', y);
    });
    document.getElementById('downloadHtml').addEventListener('click', ()=>{
      const html = document.documentElement.outerHTML;
      download('heathen-hord-generateur-prompt-v10.5-fr-integral.html', html, 'text/html');
    });
  </script>
</body>
</html>
